#!/usr/bin/env ruby

require 'aws-sdk'
require 'optparse'

require_relative '../lib/quarantine/cli'

begin
  cli = Quarantine::CLI.new
  cli.parse
  cli.create_tables
rescue => e
  STDERR.puts "#{e.class}: #{e.message}"
  STDERR.puts e.backtrace.join("\n")
  exit 1
end
exit

# dynamodb = Aws::DynamoDB::Client.new({ region: options[:region] })

# dynamodb.create_table(
#   {
#     table_name: options[:quarantine_list_table_name],
#     attribute_definitions: [
#       {
#         attribute_name: 'id',
#         attribute_type: 'S'
#       },
#       {
#         attribute_name: 'build_number',
#         attribute_type: 'S'
#       }
#     ],
#     key_schema: [
#       {
#         attribute_name: 'id',
#         key_type: 'HASH'
#       },
#       {
#         attribute_name: 'build_number',
#         key_type: 'RANGE'
#       }
#     ],
#     provisioned_throughput: {
#       read_capacity_units: 5,
#       write_capacity_units: 5
#     }
#   }
# )

# dynamodb.create_table(
#   {
#     table_name: options[:failed_test_table_name],
#     attribute_definitions: [
#       {
#         attribute_name: 'id',
#         attribute_type: 'S'
#       },
#       {
#         attribute_name: 'build_number',
#         attribute_type: 'S'
#       }
#     ],
#     key_schema: [
#       {
#         attribute_name: 'id',
#         key_type: 'HASH'
#       },
#       {
#         attribute_name: 'build_number',
#         key_type: 'RANGE'
#       }
#     ],
#     provisioned_throughput: {
#       read_capacity_units: 5,
#       write_capacity_units: 5
#     }
#   }
# )
